<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>俄语单词库</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/styles.css?v=1.8">
</head>
<body>
    <!-- 西里尔字母背景装饰 -->
    <div class="cyrillic-bg bg-1">А</div>
    <div class="cyrillic-bg bg-2">Я</div>
    
    <!-- 顶部导航栏 - 修改为毛玻璃效果并移除图标 -->
    <div class="top-nav">
        <!-- 左上角按钮 -->
        <div class="nav-left">
            <button class="nav-btn">
                <span>Della的俄语日记</span>
            </button>
        </div>
        
        <!-- 右上角按钮 -->
        <div class="nav-right">
            <a class="nav-btn" href="https://www.xiaohongshu.com/goods-detail/67b70242e0b5940001832521?xsec_token=XBOlUEqTNeqwu1R6G_gbP25yNp-nP0z852gYHODfwWAqQ=&xsec_source=app_share&instation_link=xhsdiscover%3A%2F%2Fgoods_detail%2F67b70242e0b5940001832521%3Ftrade_ext%3DeyJjaGFubmVsSW5mbyI6bnVsbCwiZHNUb2tlbkluZm8iOm51bGwsInNoYXJlTGluayI6Imh0dHBzOi8vd3d3LnhpYW9ob25nc2h1LmNvbS9nb29kcy1kZXRhaWwvNjdiNzAyNDJlMGI1OTQwMDAxODMyNTIxP2FwcHVpZD02NjhmODgyNjAwMDAwMDAwMGYwMzQxYTYiLCJsaXZlSW5mbyI6bnVsbCwic2hvcEluZm8iOm51bGwsImdvb2RzTm90ZUluZm8iOm51bGwsImNoYXRJbmZvIjpudWxsLCJzZWFyY2hJbmZvIjpudWxsLCJwcmVmZXIiOm51bGx9%26rate_limit_meta%3DitemId%253D672cd4da767bf600012751ed%26source%3D%26rn%3Dtrue&share_id=d145478ef9924309947fcf7c4fb5ee18&share_channel=wechat" target="_blank" rel="noopener noreferrer">
                <span>俄语素材库</span>
            </a>
            <button class="nav-btn" id="contactAuthorBtn">
                <span>联系作者</span>
            </button>
            <button class="nav-btn" id="addToHomeBtn">
                <span>添加桌面</span>
            </button>
            <div class="avatar">
                D
            </div>
        </div>
    </div>
    
    <!-- 控制面板 -->
    <div class="control-panel" id="controlPanel">
        <div class="toggle-container">
            <label class="toggle-label">朗读单词</label>
            <label class="switch">
                <input type="checkbox" id="speakToggle">
                <span class="slider"></span>
            </label>
        </div>
        <div class="toggle-container">
            <label class="toggle-label">对错音效</label>
            <label class="switch">
                <input type="checkbox" id="soundToggle">
                <span class="slider"></span>
            </label>
        </div>
        <button class="god-button" id="godButton" title="自动填入正确答案">上帝</button>
        <div class="toggle-container">
            <label class="toggle-label">开始上帝</label>
            <label class="switch">
                <input type="checkbox" id="godModeToggle">
                <span class="slider"></span>
            </label>
        </div>
    </div>
    
    <!-- 这里原本有登录页面的代码，现已移除 -->

    <div class="container">
        <!-- 一级页面：级别选择 -->
        <div class="level-selection" id="levelSelection">
            <div class="level-selection-header">
                <h1>俄语单词库</h1>
            </div>
            
            <div class="app-description">
                <p><i class="fas fa-lightbulb"></i> 学习模式：根据中文提示输入俄语单词，系统自动检查正确性</p>
                <p>每个单词自动朗读，提交答案后有音效反馈</p>
            </div>
            
            <!-- 分类按钮组 - 恢复动态生成 -->
            <div class="categories-container">
                <!-- 场景分类 -->
                <div class="category-group">
                    <h3>场景分类</h3>
                    <div class="category-buttons" id="sceneCategoryButtons"></div>
                </div>
                
                <!-- 级别分类 -->
                <div class="category-group">
                    <h3>级别分类</h3>
                    <div class="category-buttons" id="levelCategoryButtons"></div>
                </div>
                
                <!-- 词书分类 -->
                <div class="category-group">
                    <h3>词书分类</h3>
                    <div class="category-buttons" id="bookCategoryButtons"></div>
                </div>
            </div>
            
            <div class="loading-indicator" id="loadingIndicator">
                <div class="loader"></div>
                <p>正在加载单词数据，请稍候...</p>
            </div>
            
            <div class="app-footer">
                <p>© 2025 俄语学习助手 | 数据来自Della的俄语日记</p>
            </div>
        </div>

        <!-- 新增：单词展示页面 -->
        <div class="word-showcase-page" id="wordShowcasePage" style="display:none;">
            <div class="showcase-header">
                <div class="showcase-header-left">
                    <button class="showcase-back-btn" id="showcaseBackBtn"><i class="fas fa-arrow-left"></i> 返回</button>
                </div>
                <div class="showcase-header-center">
                    <button class="showcase-start-btn" id="startLearningBtn">开始听写</button>
                </div>
                <div class="showcase-header-right">
                    <span class="showcase-title" id="showcaseTitle"></span>
                </div>
            </div>
            <div class="word-cards-container" id="wordCardsContainer"></div>
        </div>

        <!-- 三级页面：单词学习 -->
        <div class="word-learning" id="wordLearning">
            <div class="learning-content">
                <div class="header">
                    <button class="back-button" id="backButton">
                        <i class="fas fa-arrow-left"></i> 返回
                    </button>
                    <div class="level-title" id="levelTitle">俄语四级</div>
                    <div style="width: 90px;"></div> <!-- 占位元素 -->
                </div>
                <div class="word-card">
                    <div class="word-header">
                        <div class="audio-controls">
                            <button class="audio-btn disabled" id="speakButton"> <!-- 默认添加disabled类 -->
                                <i class="fas fa-volume-up"></i>
                            </button>
                        </div>
                        <div class="chinese-word" id="chineseWord">大学生</div>
                    </div>
                    <div class="input-container">
                        <button class="confirm-button" id="confirmButton">确认</button>
                        <input type="text" class="russian-input" id="russianInput" autocomplete="off">
                    </div>
                    <div class="feedback" id="feedback"></div>
                </div>
                <div class="controls">
                    <button class="control-button" id="prevButton">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <button class="control-button" id="nextButton">
                        <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
                <div class="progress-container">
                    <div class="progress-text"><span id="progressText">1/20</span></div>
                    <div class="progress-bar">
                        <div class="progress" id="progressBar"></div>
                    </div>
                </div>
                <div class="handwriting-hint">
                    手写笔手写：IPad：打开随手写，切换成当前语种；其他品牌尝试切换系统语言到当前语种（华为不支持）
                </div>
            </div>
        </div>
    </div>

    <script>
    // 禁止双指缩放
    document.addEventListener('touchstart', function (event) {
        if (event.touches.length > 1) {
            event.preventDefault();
        }
    }, { passive: false });

    // 禁止双击缩放
    let lastTouchEnd = 0;
    document.addEventListener('touchend', function (event) {
        const now = (new Date()).getTime();
        if (now - lastTouchEnd <= 300) {
            event.preventDefault();
        }
        lastTouchEnd = now;
    }, false);
    </script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@10.60t/confetti.browser.min.js"></script>
    <script src="js/app.js?v=1.9"></script>
    <div id="errorEmojiBox" class="error-emoji-box">
      <span class="error-emoji">😢</span>
      <span class="error-emoji">😱</span>
      <span class="error-emoji">😭</span>
      <span class="error-emoji">😳</span>
      <span class="error-emoji">🤔</span>
      <span class="error-emoji">😵‍💫</span>
      <span class="error-emoji">😓</span>
      <span class="error-emoji">😰</span>
      <span class="error-emoji">😮‍💨</span>
      <span class="error-emoji">😬</span>
      <span class="error-emoji">🥲</span>
      <span class="error-emoji">��</span>
    </div>
    <div id="authorModal" class="modal" style="display:none;">
        <div class="modal-content">
            <button class="close-btn-text" id="closeAuthorModalText">关闭</button>
            <img src="zuozhe.jpg" alt="作者" style="max-width:90vw;max-height:80vh;display:block;margin:auto;">
        </div>
    </div>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        var contactBtn = document.getElementById('contactAuthorBtn');
        var modal = document.getElementById('authorModal');
        var closeBtnText = document.getElementById('closeAuthorModalText');
        if(contactBtn && modal && closeBtnText) {
            contactBtn.onclick = function() { modal.style.display = 'block'; };
            closeBtnText.onclick = function() { modal.style.display = 'none'; };
            window.onclick = function(event) {
                if(event.target === modal) modal.style.display = 'none';
            };
        }
    });
    </script>
    <div id="addToHomeModal" class="modal" style="display:none;">
        <div class="modal-content">
            <button class="close-btn-text" id="closeAddToHomeModal">关闭</button>
            <div style="padding:18px 8px 8px 8px; color:#222; font-size:1.1rem; line-height:1.7;">
                <b>如何将本网站添加到桌面？</b><br><br>
                <span id="addToHomeGuide">
                  <!-- JS中根据平台动态填充 -->
                </span>
            </div>
        </div>
    </div>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        var addToHomeBtn = document.getElementById('addToHomeBtn');
        var addToHomeModal = document.getElementById('addToHomeModal');
        var closeAddToHomeModal = document.getElementById('closeAddToHomeModal');
        var addToHomeGuide = document.getElementById('addToHomeGuide');
        if(addToHomeBtn && addToHomeModal && closeAddToHomeModal && addToHomeGuide) {
            addToHomeBtn.onclick = function() {
                // 判断平台
                var ua = navigator.userAgent;
                if(/iPhone|iPad|iPod/i.test(ua)) {
                    addToHomeGuide.innerHTML = '1. 点击Safari底部的 <b>分享</b> 按钮<br>2. 选择 <b>添加到主屏幕</b> 即可';
                } else if(/Android/i.test(ua)) {
                    addToHomeGuide.innerHTML = '1. 点击浏览器右上角 <b>菜单</b> 按钮<br>2. 选择 <b>添加到主屏幕</b> 或 <b>安装应用</b> 即可';
                } else {
                    addToHomeGuide.innerHTML = '请在浏览器菜单中选择 <b>添加到主屏幕</b> 或 <b>安装应用</b>。';
                }
                addToHomeModal.style.display = 'block';
            };
            closeAddToHomeModal.onclick = function() { addToHomeModal.style.display = 'none'; };
            window.addEventListener('click', function(event) {
                if(event.target === addToHomeModal) addToHomeModal.style.display = 'none';
            });
        }
    });
    </script>
</body>
</html> 